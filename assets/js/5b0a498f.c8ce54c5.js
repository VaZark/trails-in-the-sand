"use strict";(self.webpackChunktil_remaster=self.webpackChunktil_remaster||[]).push([[9598],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),f=s(n),u=r,m=f["".concat(d,".").concat(u)]||f[u]||c[u]||o;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=f;var i={};for(var d in t)hasOwnProperty.call(t,d)&&(i[d]=t[d]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},1262:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return s},toc:function(){return p},default:function(){return f}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),l=["components"],i={},d="Django Related Datafields",s={unversionedId:"django/drf/Django Related Datafields",id:"django/drf/Django Related Datafields",title:"Django Related Datafields",description:"Examining Data Relations",source:"@site/docs-python/django/drf/Django Related Datafields.md",sourceDirName:"django/drf",slug:"/django/drf/Django Related Datafields",permalink:"/docs-python/django/drf/Django Related Datafields",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Custom Validations",permalink:"/docs-python/django/drf/Custom Validations"},next:{title:"Writeable Nested Fields",permalink:"/docs-python/django/drf/Writeable Nested Fields"}},p=[{value:"Examining Data Relations",id:"examining-data-relations",children:[],level:2},{value:"Foreign Key and OneToOne field",id:"foreign-key-and-onetoone-field",children:[],level:2},{value:"ManyToMany Field",id:"manytomany-field",children:[{value:"Through Table",id:"through-table",children:[],level:3}],level:2}],c={toc:p};function f(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"django-related-datafields"},"Django Related Datafields"),(0,o.kt)("h2",{id:"examining-data-relations"},"Examining Data Relations"),(0,o.kt)("p",null,"One of the most common usecases when dealing with any SQL model is the storage and retrieval of related fields viz ",(0,o.kt)("em",{parentName:"p"},"Foreign Keys"),", ",(0,o.kt)("em",{parentName:"p"},"OneToOne")," Fields and ",(0,o.kt)("em",{parentName:"p"},"ManyToMany")," fields. While DRF allows us to create ",(0,o.kt)("em",{parentName:"p"},"ModelSerializers")," for any Django model, it retrieves only the foreignKey of the corresponding related fields."),(0,o.kt)("p",null,"If the developer wishes to expand and fetch the related details for the same, there are a few ways to go about it for the different types of field and usecases."),(0,o.kt)("h2",{id:"foreign-key-and-onetoone-field"},"Foreign Key and OneToOne field"),(0,o.kt)("p",null,"There are two ways to expand and fetch data when one of the endpoints deals with a single reference"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"depth=1")),(0,o.kt)("li",{parentName:"ul"},"Related Serializer")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"depth=1"))," "),(0,o.kt)("p",null,"Adding this parameter in the ",(0,o.kt)("em",{parentName:"p"},"Meta"),"  class of the serializer that refers to another Field, fetches all the details of same referenced field with a corresponding serializer. The value assigned to the ",(0,o.kt)("inlineCode",{parentName:"p"},"depth")," variable defines the number of levels the Serializer will try to fetch references for,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"class ChildSerializer(ModelSerializer):\n  class Meta:\n    model = Child\n    fields = ['id','name','parent']\n    depth=1\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"Related Serializer"))," "),(0,o.kt)("p",null,"Another way to fetch the same result is to define the serializer to be used for a corresponding field. This particularly useful when we wish to override a few settings"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"class ChildSerializer(ModelSerializer):\n  parent = ParentSerializer()\n  class Meta:\n    model = Child\n    fields = ['id','name','parent']\n")),(0,o.kt)("h2",{id:"manytomany-field"},"ManyToMany Field"),(0,o.kt)("p",null,"The m2m field is a database concept to define references between the columns of two tables which are related but independent of each other. It is accessible from both sides of the definition. The best way to imagine it is to think of ForeignKey fields that are applicable on both sides of the equation"),(0,o.kt)("p",null,"Eg: An ",(0,o.kt)("em",{parentName:"p"},"order")," can have multiple products; You can also look up the orders that have a ",(0,o.kt)("em",{parentName:"p"},"product")),(0,o.kt)("p",null,"Django implements with a ",(0,o.kt)("inlineCode",{parentName:"p"},"ManyToManyField(Table_2)")),(0,o.kt)("h3",{id:"through-table"},"Through Table"),(0,o.kt)("p",null,"Django internally creates a ",(0,o.kt)("inlineCode",{parentName:"p"},"through")," table that tracks the exact relation between the two tables of ",(0,o.kt)("em",{parentName:"p"},"ManyToMany")," relationship."),(0,o.kt)("p",null,"However, we can leverage and implement this table ourselves if we wish to add additional data to the relationship."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"\nclass Order(models.Model):\n  name = models.CharField(max_length=30)\n  toppings = models.ManyToManyField('Product', through='OrderDetail')\n\nclass Product(models.Model):\n  name = models.CharField(max_length=30)\n  price = models.PositiveIntegerField()\n\nclass OrderDetail(models.Model):\n  order = models.ForeignKey(Order, on_delete=models.CASCADE)\n  product = models.ForeignKey(Product, on_delete=models.CASCADE)\n  count = models.PositiveIntegerField() # Additional Field\n\n# Retrieve additional fields with related_name\norder_obj.orderdetail_set.select_related('product')\n")))}f.isMDXComponent=!0}}]);