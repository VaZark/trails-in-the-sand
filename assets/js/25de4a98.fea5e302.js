"use strict";(self.webpackChunktil_remaster=self.webpackChunktil_remaster||[]).push([[8482],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=n.createContext({}),c=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),f=c(r),m=a,d=f["".concat(p,".").concat(m)]||f[m]||l[m]||o;return r?n.createElement(d,s(s({ref:t},u),{},{components:r})):n.createElement(d,s({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=f;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},8185:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return u},default:function(){return f}});var n=r(7462),a=r(3366),o=(r(7294),r(3905)),s=["components"],i={},p="Parsing Form data in python",c={unversionedId:"Basics/useful refs/form_parser",id:"Basics/useful refs/form_parser",title:"Parsing Form data in python",description:"Python has complete frameworks that handle data parsing when it comes to form requests but sometimes it's is necessary to handle the form parsing by yourself.",source:"@site/docs-python/Basics/useful refs/form_parser.md",sourceDirName:"Basics/useful refs",slug:"/Basics/useful refs/form_parser",permalink:"/docs-python/Basics/useful refs/form_parser",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Basic Plugin",permalink:"/docs-python/Basics/useful refs/bare_basic_plugin"},next:{title:"Cheatsheet for basic python",permalink:"/docs-python/Basics/Cheatsheet"}},u=[],l={toc:u};function f(e){var t=e.components,r=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,n.Z)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"parsing-form-data-in-python"},"Parsing Form data in python"),(0,o.kt)("p",null,"Python has complete frameworks that handle data parsing when it comes to form requests but sometimes it's is necessary to handle the form parsing by yourself."),(0,o.kt)("p",null,"Case in point, AWS Chalice. This framework for AWS Lambda + Gateway does not natively support ",(0,o.kt)("em",{parentName:"p"},"parsing")," form data at the time of writing. So below, you can find the helper snippet for the same"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from requests_toolbelt.multipart import decode\n\ndef parse_multipart(request, raw_data):\n    fields ={}\n    \n    for part in decoder.MultipartDecoder(raw_data, request.headers['content-type'], encoding=\"utf-8\").parts:\n        disposition = part.headers[b'Content-Disposition']\n        print(part.headers)\n        params = {}\n        for dispPart in str(disposition).split(';'):\n            kv = dispPart.split('=', 2)\n            params[str(kv[0]).strip()] = str(kv[1]).strip('\\\"\\'\\t \\r\\n') if len(kv)>1 else str(kv[0]).strip()\n        name = params['name'] if 'name' in params else BadRequestError(\"Field name is missing\")\n        fields[name] = part.content.decode(part.encoding)\n\n    # # Logger\n    # for key, val in fields.items():\n    #     if key.endswith(\"file\"):\n    #         print(f\"{key} :: redacted\")\n    #         continue\n    #     print(f\"{key} :: {val}\")\n\n    return fields\n")))}f.isMDXComponent=!0}}]);